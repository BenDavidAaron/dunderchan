{% extends "_base.jinja2" %}
{% block content %}
<div class="container is-primary">
    <section class="hero">
        <h1 class="title">Dunderchan</h1>
        <h2 class="subtitle">{{ greeting }}</h2>
    </section>
    <section>
        <form hx-post="/posts" hx-target="#posts_list">
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" placeholder="Title" size="30" required></br>
            <label for="author">Author:</label>
            <input type="text" id="author" name="author" placeholder="Author" size="28"></br>
            <label for="content">New Content:</label>
            <button type="submit">Submit Post</button>
            </br>
            <textarea type="text" id="content" name="content" placeholder="Content" rows="5" , cols="30"
                required></textarea>
        </form>
        <button id="refreshButton" hx-get="/posts" hx-swap="innerHTML" hx-target="#posts_list">
            Refresh Poasts
        </button>
        <script>
            function refreshPosts() {
                // Your HTMX function code here
                htmx.trigger(document.getElementById("refreshButton"), "click");
            }
            document.addEventListener("DOMContentLoaded", function () {
                refreshPosts(); // Call your HTMX function on page load
            });
        </script>
    </section>
    <section>
        <div id="posts_list"></div>
    </section>
</div>
{% endblock %}