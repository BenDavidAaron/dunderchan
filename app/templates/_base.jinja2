<!DOCTYPE html>
<html>

<head>
    <title>Dunderchan</title>
    <script src="https://unpkg.com/htmx.org@1.8.5"></script>
    <link rel="shortcut icon" type="image/jpg" href="/static/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="/static/styles.css">
</head>

<body>
    {% block content %}
    {% endblock %}
    <script src="https://unpkg.com/htmx.org@1.8.5"></script>
    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"
        integrity="sha384-c79GN5VsunZvi+Q/WObgk2in0CbZsHnjEqvFxC5DxHn9lTfNce2WW6h2pH6u/kF+"
        crossorigin="anonymous"></script>
    <script>
        console.log("trying to connect")
        var socket = io.connect('http://' + document.domain +':', {path: 'ws/socket.io'}); // Replace with your server address and port
        console.log("connected")

        socket.on('new_post', function (data) {
            // Code to update your post list
            console.log('Received a new post:', data);

            // For example, appending the new post to a list
            var postList = document.getElementByClass('post-list'); // Replace with your post list element ID
            var newPost = document.createElement('p');

            newPost.innerHTML = `<b>${data.id} - ${data.author_hash} : ${data.title}</b></br>${data.content}`;
            postList.appendChild(newPost);
        });
    </script>
</body>

</html>